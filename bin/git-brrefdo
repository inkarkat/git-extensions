#!/bin/sh

: ${GIT_BRREFDO_COMMAND_JOINER=;}
: ${GIT_BRREFDO_PREDICATECOMMAND_JOINER=&&}
: ${GIT_BRREFDO_BRANCHES_END=;}
: ${GIT_BRREFDO_SOURCE_COMMAND:=git-abr}
: ${GIT_BRREFDO_COMMANDNAME:=$(basename -- "$0")}
: ${GIT_BRREFDO_WHAT:=branches}
: ${GIT_BRREFDO_BRANCH_MARKER='{}'}
branchMarker="$GIT_BRREFDO_BRANCH_MARKER"; unset GIT_BRREFDO_BRANCH_MARKER

GIT_REFDO_COMMAND_JOINER="$GIT_BRREFDO_COMMAND_JOINER" \
GIT_REFDO_PREDICATECOMMAND_JOINER="$GIT_BRREFDO_PREDICATECOMMAND_JOINER" \
GIT_REFDO_REVISIONS_END="$GIT_BRREFDO_BRANCHES_END" \
GIT_REFDO_SOURCE_COMMAND="$GIT_BRREFDO_SOURCE_COMMAND" \
GIT_REFDO_SOURCE_SORTED="$GIT_BRREFDO_SOURCE_SORTED" \
GIT_REFDO_COMMANDNAME="$GIT_BRREFDO_COMMANDNAME" \
GIT_REFDO_WHAT="$GIT_BRREFDO_WHAT" \
GIT_REFDO_WHAT_ARG=branches \
GIT_REFDO_REVISION_MARKER="$branchMarker" \
exec git-refdo "$@"
